---
title: 점(.) 과 sh의 차이
date: 2024-01-03
draft: false
tags:
  - Concept
  - Linux
complete: false
---
### sh command
`sh` 명령어는 스크립트 파일을 실행하는 역할을 합니다.
자세히 말하자면, 새로운 서브 쉘(subshell)을 생성하고, 스크립트를 그 서브 쉘에서 실행합니다.

스크립트 안에서 선언한 환경 변수는 해당 서브 쉘 내에서만 영향을 미치며, 실행이 끝나면 현재 쉘의 환경 변수에는 영향을 주지 않기 때문에 다음과 같은 명령어는 동작하지 않습니다.

```sh
echo "export MYNAME='JOHN'" > env.sh
sh env.sh

echo HELLO $MYNAME
(NONE)
```

### .(source) command
`.` (또는 `source`) 명령어는 스크립트 파일을 현재 쉘에서 직접 실행하는 역할을 합니다.
스크립트 파일을 현재 쉘에서 실행하므로 스크립트 안에서 선언한 환경 변수는 현재 쉘에 영향을 미칩니다.

```sh
echo "export MYNAME='JOHN'" > env.sh
. env.sh

echo HELLO $MYNAME
HELLO JOHN
```


### ./ command
여기서 `./` 는 위에 명시된 `.` 에다가 `/` 를 합쳐 현재 디렉토리에 있는`env.sh` 스크립트 파일을 현재 쉘 세션으로 소스 (source)하여 명령어나 환경 변수를 현재 쉘 환경으로 가져옵니다.

따라서, `env.sh` 스크립트 파일이 현재 디렉토리에 존재한다는 가정하에:
- `. env.sh`  & `./env.sh` 명령어는 동일하게 동작
- `sh env.sh` 명령어는 서브쉘에서 실행되기 때문에 환경 변수에 영향을 미치지 않음

### source command
위에서 이미 언급된 바와같이, `source` 명령어는 스크립트 파일을 실행하는 것이 아니라 해당 파일의 내용을 현재 쉘에서 실행하므로 스크립트 파일 안에서 정의된 환경 변수, 함수, 별칭 등이 현재 쉘 환경에 영향을 미칩니다.

주로 셸의 초기화 파일 (예: `.bashrc`, `.bash_profile`)을 실행하여 셸 환경을 초기화하거나 사용자 지정 설정을 적용합니다.

예를 들어, `.bashrc` 파일을 `.bash_profile` 파일에서 `source` 명령어로 실행하면 사용자 지정 환경 설정과 환경 변수가 현재 로그인된 사용자의 쉘 세션에 적용됩니다.

```sh
if [ -f ~/.bashrc ]; then
    source ~/.bashrc
fi
```