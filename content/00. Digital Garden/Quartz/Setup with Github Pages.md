---
title: Setup with Github Pages
date: 2023-10-06
draft: false
tags:
  - Quartz
---
*Parent* : [[00. Digital Garden]]

1. 깃헙 레포 생성
	1. `quartz` 로 블로그 생성시 `guaqamole.github.io` 주소가 `baseurl`이 되기 때문에 레포이름이 서브 도메인 주소가 된다.
	2. 예시) 레포 이름이 test일시 URL은 `guaqamole.github.io/test` 가 된다.
2. 브랜치를 main에서 v4로 변경
	1. Settings > General > Default Branch
3. 배포 방식을 Github Actions로 변경
	1. Settings > Pages > Build and deployment
4. 브랜치 protection rule 삭제
	1. Settings > Environments

___

## 🪴 Get Started

Quartz requires **at least [Node](https://nodejs.org/) v18.14** and `npm` v9.3.1 to function correctly. Ensure you have this installed on your machine before continuing.

Then, in your terminal of choice, enter the following commands line by line:
~~~bash
git clone https://github.com/jackyzha0/quartz.git
cd quartz
npm i
npx quartz create
~~~

___

## GitHub Pages

Like Quartz 3, you can deploy the site generated by Quartz 4 via GitHub Pages.

> Warning
> Quartz generates files in the format of `file.html` instead of `file/index.html` which means the trailing slashes for _non-folder paths_ are dropped. As GitHub pages does not do this redirect, this may cause existing links to your site that use trailing slashes to break. If not breaking existing links is important to you, consider using [Cloudflare Pages](https://quartz.jzhao.xyz/hosting#cloudflare-pages).

In your local Quartz, create a new file `quartz/.github/workflows/deploy.yml`.

`quartz/.github/workflows/deploy.yml`
~~~yaml
name: Deploy Quartz site to GitHub Pages
 
on:
  push:
    branches:
      - v4
 
permissions:
  contents: read
  pages: write
  id-token: write
 
concurrency:
  group: "pages"
  cancel-in-progress: false
 
jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0 # Fetch all history for git info
      - uses: actions/setup-node@v3
        with:
          node-version: 18.14
      - name: Install Dependencies
        run: npm ci
      - name: Build Quartz
        run: npx quartz build
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v2
        with:
          path: public
 
  deploy:
    needs: build
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2
~~~

## Commit these changes by doing `npx quartz sync`. 