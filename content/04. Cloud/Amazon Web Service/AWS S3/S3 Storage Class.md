---
title: S3 Storage Class
topic: S3 Storage Class
date: 2023-11-21
draft: false
tags:
  - AWS
  - S3
  - Storage
complete: true
---
S3 스토리지는 일반적으로 **어떤 종류의 데이터를 관리하는지**에 따라서 그리고 **얼마나 자주 그 데이터에 접근해야 하는지**에 따라서 분류가 된다.

[![s3-티어-생명주기](https://blog.kakaocdn.net/dn/lO6Us/btrFugoBdyc/gvqeaRhvzKDBpllpBg1ze0/img.jpg)](https://blog.kakaocdn.net/dn/lO6Us/btrFugoBdyc/gvqeaRhvzKDBpllpBg1ze0/img.jpg)

예를들어 자주 엑세스하는 데이터는 내구성이 높은 스토리지에, 자주 엑세스는 하지는 않는데 그래도 저장이 필요한 데이터들은 비교적 가격이 저렴한 스토리지에 저장하는 등 다양히 활용할 수 있다.

아마존의 일종의 마케팅 전략이라고 보면 된다. 그렇지만 생각보다 훨씬 합리적인 요금제이다. 

사용자가 정말 “쓴 만큼만" 과금할 수 있도록 하는 요금제이기 때문이다.

그래서 이런 분류를 **Storage Class**라고 하며 각각 다음과 같은 특징이 있다.  

Amazon S3에는 7가지 `Storage Class`를 제공한다:
- Amazon S3 Standard (default)
- Amazon S3 Standard - Infrequent Access (IA)
- Amazon S3 One Zone - Infrequent Access
- Amazon S3 Glacier Instant Retrieval
- Amazon S3 Glacier Flexible Retrieval
- Amazon S3 Glacier Deep Archive
- Amazon S3 Intelligent Tiering

| Types                 | Standard                | Intelligent Tiering     | Standard - IA           | One Zone - IA           | Glacier                 | Glacier Deep Archive    |
| --------------------- | ----------------------- | ----------------------- | ----------------------- | ----------------------- | ----------------------- | ----------------------- |
| 내구성을 위한 설계    | 99.999999999%(11개의 9) | 99.999999999%(11개의 9) | 99.999999999%(11개의 9) | 99.999999999%(11개의 9) | 99.999999999%(11개의 9) | 99.999999999%(11개의 9) |
| 가용성을 위한 설계    | 99.99%                  | 99.9%                   | 99.9%                   | 99.5%                   | 99.99%                  | 99.99%                  |
| 가용성 SLA            | 99.9%                   | 99%                     | 99%                     | 99%                     | 99.9%                   | 99.9%                   |
| 가용 영역             | ≥3                      | ≥3                      | ≥3                      | 1                       | ≥3                      | ≥3                      |
| 객체당 최소 용량 요금 | 해당 사항 없음          | 해당 사항 없음          | 128KB                   | 128KB                   | 40KB                    | 40KB                    |
|최소 스토리지 기간 요금|해당 사항 없음|30일|30일|30일|90일|180일|
|검색 요금|해당 사항 없음|해당 사항 없음|검색한 GB당|검색한 GB당|검색한 GB당|검색한 GB당|
|첫 번째 바이트 지연 시간|밀리초|밀리초|밀리초|밀리초|분 또는 시간 선택|시간 선택|
|스토리지 유형|객체|객체|객체|객체|객체|객체|
|수명 주기 전환|예|예|예|예|예|예|

**금액 예시**
![](https://i.imgur.com/qV76FFp.png)

<br>

## S3 Standard

> [!success] 언제사용?
> S3 하면 가장 보편적으로 사용되는 스토리지 타입이며 가장 일반적인 요금제 이다.

99.99% 가용성, 99.999999999% 내구성을 지니고 있다.

> [!tip] 
> - **내구성** : 어떤 조건에서도 데이터가 유지할 수 있는 퍼센트. 99.999999999% 내구성이란 인프라가 실패하더라도 표준 S3 플랫폼에 저장된 데이터의 손실 가능성은 사실상 0에 가깝다는 의미
> - **가용성 ** : 객체에 대한 지속적인 요청을 처리할 수 있는 능력을 퍼센트.
> - **비용 효율성** : 비용을 얼마나 절약할 수 있는지 


<br>

## S3 IA (Standard Ia / One Zone Ia)

> [!success] 언제사용?
> 자주 접근되지는 않으나 접근시 빠른 접근이 요구되는 파일이 많을시 저렴한 가격에 IA에 보관하면 유용하다.

일반 S3에 비해 비용은 저렴하나 데이터를 불러올때마다 추가 비용 발생한다.

### Standard IA
- 데이터 99.9% 보장
- 장애 복구, 백업에 적합

### One Zone IA
- 스탠다드 IA와 트래픽 요금은 같지만 저장요금은 더 저렴(20%)
- 하나의 AZ에만 저장하니 만일 가용영역에 문제가 생길경우 데이터를 날려먹을 수 있다는 위험은 존재한다.

### 예시
- 뉴스 신문 서비스를 예로 들자면 오늘기사는 트래픽이 많겠지만 1달 2달이 지나면 트래픽이 많이 줄어들 것이다.
- 그렇다고 트래픽이 계속 하향추세로 간다고 단정짓기도 애매한것이 나중에 다시금 기사가 이슈화되어 또 다시 많은 트래픽이 몰릴 수 있어 언제든 많은 트래픽이 올것을 준비하고 있어야 한다.
→ 이럴때 Infrequent Access를 사용하기 적합하다. 
→ 즉, 사용도가 다소 낮은경우의 요금제라고 이해하면 된다. 

> [!tip] 
> 일반적으로 S3에서 30일이상 액세스가 잘 이루어지지 않았다면 알아서 IA요금제로 전환되도록 되어있다.

![Standard One Zone - IA의 경우에는 99.999999999%의 내구성과 99.5%의 가용성을 지원](https://i.imgur.com/ZPHQq2e.png)



## S3 Intelligent Tiering (지능형 계층화)

머신러닝을 통해서 **자동으로 파일의 티어(클래스)를 변경** 하는 서비스이다.
![](https://i.imgur.com/wXoMLcY.png)

예를들어 최근에 파일을 사람들이 자주 접근하면 스탠다드에 옮기고, 접근빈도가 낮으면 IA로 옮기고, 다시 많이 찾으면 스탠다드에 옮기는 형식이다.

퍼포먼스 손해 오버헤드 없으며 관리비도 그렇게 많이 들지 않는다.

<br>

## S3 - Glacier
이름에서 볼수있듯이, 빙하에 데이터를 꽁꽁 얼려 보관하는 컨셉의 아카이브 서비스이다.

> [!success] 언제사용?
> 5년전, 10년전 데이터, 아무도 볼것 같지도 않아 쓸모 없는데 법적인 이유 등으로 보관은 해야되는 데이터들을 보통 취급한다. 
>
즉, **거의 접근하지 않을 데이터** 저장 시 유용하며 매우 저렴한 비용을 자랑한다.

#### S3랑 뭐가 다른가?
- 데이터 접근시 대략 분~시간 소요될 정도로 상당히 오래걸린다.
- Glacier 아카이브의 저장 용량은 40TB로 제한되며 (S3는 제한 없음), 
- 아카이브 생성 시 기본적으로 저장 데이터를 암호화하고(S3에서는 암호화가 옵션)
- 아카이브 이름은 기계 생성 ID 형식을 지니는 등(S3 버킷은 사람이 읽기 쉬운 키 이름 제공) 

Glacier에서 아카이브라는 말은 문서, 비디오, TAR, ZIP 파일 등 저장 객체를 가리키는 말이며, **Glacier vaults(볼트)**에 저장된다.

Glacier에서 **볼트**는 S3에서 **버킷**에 대응되는 개념이지만, 전역에서 유일무이한 이름을 부여할 필요는 없다.

---

S3 스토리지가 여러 티어 클래스로 나뉘듯이, Glacier 스토리지 자체에서도 다음 세 가지가 존재한다:
- S3 Glacier Instant Retrieval
- S3 Glacier Flexible Retrieval
- S3 Glacier Deep Archive
그중에서 S3 Glacier Deep Archive가 가장 저렴한 서비스이다.

#### **S3 Glacier Instant Retrieval**
> [!success] 언제사용?
> 자주 액세스하지 않지만 이미지 호스팅, 온라인 파일 공유 애플리케이션, 의료 영상 및 건강 기록, 뉴스 미디어 자산, 위성 및 항공 영상과 같이 성능에 민감한 사용 사례에서 즉시 액세스할 수 있어야 하는 데이터용으로 설계 되었다.

#### **S3 Glacier Flexible Retrieval**
> [!success] 언제사용?
> - 수 분~몇 시간(최대 12시간)의 검색 시간, 연간 1~2회 액세스에 적합
> - 즉각적인 액세스가 필요하지 않지만 백업 또는 재해 복구 사용 사례와 같이 대규모 데이터 집합을 무료로 검색할 수 있는 유연성이 필요한 아카이브 데이터에 이상적인 스토리지 클래스.

#### **S3 Glacier Deep Archive**
> [!success] 언제사용?
> - 12~48시간의 검색 시간, 연 1회 미만 액세스에 적합, **가장 저렴한 스토리지**
> - 데이터 집합을 7~10년 이상 보관하는 금융 서비스, 의료, 미디어, 엔터테인먼트, 공공 부문의 고객을 위해 설계되었다.


<br>


#### 연습문제
![](https://i.imgur.com/AFvjjch.png)
