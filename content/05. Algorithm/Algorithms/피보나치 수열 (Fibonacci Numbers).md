---
title: 피보나치 수열 (Fibonacci Numbers)
date: 2023-11-13
draft: false
tags:
  - DynamicProgramming
  - Concept
complete: true
---
![Fibonacci and rabbits](https://i.imgur.com/Q6F6SGP.png)

피보나치는 자신의 책에서 처음으로 <mark style="background: #C6AB16;">오늘날 우리가 사용하고 있는 인도-아라비아 숫자와 이 숫자를 사용하여 수를 쓰는 방법과 셈을 하는 방법을 소개</mark>했다. 당시 유럽인들은 (우리나라를 포함한 동양도 마찬가지로) 계산은 주판으로 하고, 계산 결과를 로마 숫자(동양의 경우는 한자)로 나타내는 번거로운 일을 해야만 했다. 그런데 인도-아라비아 숫자가 도입되며 계산과 표기를 한꺼번에 할 수 있게 되며 수학은 일대 전환기를 맞이한다.

『산반서』에서 새로운 수를 어떻게 활용하는지 알려주려고 제시된 실용적인 문제는 우리에게 중세의 화폐, 무게와 길이, 사업의 실제 계산과 상품 등 다양한 정보를 준다. 더욱이 이 책에 흥미로운 수학 문제가 많이 소개되어 있다. 그런 문제 중에서 특히 우리의 흥미를 끄는 문제는 <mark style="background: #C6AB16;">토끼의 번식에 관한 것이다.</mark>

『산반서』의 12장에 있는 수학 문제에 나타난 수열을 1870년대 프랑스의 수학자 루카스(E. Lucas)가 ‘피보나치 수열’이라고 이름 지었는데, 오늘날 이 수열은 자연계뿐만 아니라, 과학, 건축, 예술에 이르기까지 아름답거나 질서정연한 어떤 형식이 있는 곳이면 빠지지 않고 등장하고 있다.

# 수열과 토끼는 어떤 관련이 있을까?

![Rabbit Breeding](https://i.imgur.com/0s8K07o.png)

 “어떤 사람이 토끼 1쌍을 우리에 넣었다. 이 토끼 1쌍은 한 달에 새로운 토끼 1쌍을 낳고, 낳은 토끼들도 1달이 지나면 다시 1쌍의 토끼를 낳는다. 그렇다면 1년이 지나면 몇 쌍의 토끼가 있을까?”

이 문제를 그림을 그려가며 알아보자. 첫 달은 원래 우리에 넣은 토끼 1쌍만이 있다. 두 달째, 처음 토끼 1쌍은 1쌍의 새끼 토끼를 낳을 것이므로 모두 2쌍의 토끼가 우리에 있다. 다음 달, 원래 토끼 1쌍은 또 다른 새끼 토끼 1쌍을 낳고, 처음 태어난 1쌍의 새끼 토끼가 자랄 것이다.

이제 3쌍의 토끼가 우리에 있다. 한 달 후, 처음 토끼 1쌍은 또 다른 새끼 토끼 1쌍을 낳고, 2번째 태어난 1쌍은 자랄 것이다. 그리고 첫 번째 태어나서 다 자란 토끼 1쌍은 다른 새끼 토끼 1쌍을 낳는다. 그러면 우리에는 모두 5쌍의 토끼가 있게 된다. 다섯 번째 달에는 8쌍이 되고 여섯 번째 달에는 13쌍의 토끼가 우리에 있게 된다.

곧 다루기 힘들 정도로 늘어나겠지만, 앞의 그림과 같은 방법으로 계속 그려나갈 수는 있다. 하지만 매달 토끼 쌍의 수를 조사하면 문제를 풀 수 있는 패턴이 아래 표와 같이 나타난다. 이 패턴에서 처음 수로 1을 첨가하면 다음과 같은 규칙과 수열을 구할 수 있다.

![](https://i.imgur.com/d2Qug61.png)

이렇게 해서 나오는 피보나치 수열의 각 항에 있는 수들을 ‘피보나치 수(Fibonacci number)’ 라고 한다. 세계 수학계에서 통용되는 공식적인 피보나치 수열의 일반항에 대한 표현은 피보나치(Fibonacci)의 앞 글자 F를 따서 Fn 으로 나타낸다. 17세기에 대수학의 기호가 발전하면서 수학자들은 이 수열을 공식 Fn+2 =Fn+1 + Fn 으로 만들었다. 즉, n+2번째 항의 피보나치 수는 n+1번째와 n번째 피보나치 수의 합과 같다.

피보나치 수열이 수학적으로 중요한 이유는 여러 가지가 있는데, 그중 하나는 <mark style="background: #C6AB16;">이 수열이 황금비를 만든다는 것</mark>이다. 즉, n+1번째 피보나치 수를 n번째 피보나치 수로 나누면 그 비율은 점차 1.6으로 수렴한다. 엄밀하게 말하면 수식은 다음 이미지와 같다.

![](https://i.imgur.com/9b4rCoU.png)

1900년대가 되어 옥스퍼드 대학의 식물학자인 처치(A. H. Church)는 놀라운 발견을 했다. 해바라기꽃의 씨의 형태에서 나선을 이루는 것을 세었더니 그것이 피보나치 수라는 것을 알게 되었다. 처치의 발견 이후로 식물학자들도 자연의 이곳저곳에서 피보나치 수를 찾았다.

예를 들면, 줄기에서 잎의 배아의 배열, 솔방울 비늘의 배열, 데이지의 작은 꽃잎, 솔방울에서 포엽의 배열 등에서 찾을 수 있다.

---

# 피보나치 수열을 구현하는 5가지 방법

## Method 1. Function
```python
def fib(n):
    a,b = 1,1
    if n==1 or n==2:
        return 1
    for i in range(1,n):
        a,b = b, a+b
    return a
```

## Method 2. Recursion
```python
def fib(n):
    if n==1 or n==2:
        return 1
    else:
        return fib(n-1) + fib(n-2)
```

## Method 3. Generator
```python
def fib():
    a,b = 0,1 #generator 출력할 때, next()로 다음것을 출력⇒ 한단계 늦춤
    while True:
        a,b = b, a+b
        yield a

f = fib()
next(f)
```

## Method 4. DP - Top Down (Memoization)
![](https://i.imgur.com/Ahw3IET.png)

```python
memo = [0] * 100
def fibo(n):
  if n == 1 or n == 2:
      return 1
  if memo[n] != 0:   # 기록된 값이면 바로 리턴
      return memo[n] 
  memo[n] = fibo(n - 1) + fibo(n - 2)   # 기록된 값이 아니면 계산후 리턴
  return memo[n]
```


## Method 5. DP - Bottom Up (Tabulation)

```python
tab = [0] * 100
tab[1], tab[2] = 1, 1  # 첫 번째, 두 번째 수는 1로 초기화
n = 99

# n번째 피보나치 수열 값 구하기
for i in range(3, n + 1):
  tab[i] = tab[i - 1] + tab[i - 2]

print(tab[n])
```